<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞ 2026</title>
  <style>
    :root {
      --bg: #102040;
      --card: #132347;
      --accent: #3b82f6;
      --accent2: #60a5fa;
      --text: #e5e7eb;
      --sub: #bcd7ff;
      --border: #243044;
      --danger: #ef4444;
    }
    html, body {
      height: 100%; margin:0;
      background:
        radial-gradient(1200px 800px at 20% -10%, #162d54 0, transparent 60%),
        linear-gradient(180deg,#182c54 0%, #102040 100%);
      color:var(--text);
      font:16px/1.5 system-ui, -apple-system, Segoe UI, Inter, Roboto, Arial, sans-serif;
    }
    .wrap {
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding-top:60px;
      padding-bottom:60px;
    }
    .card {
      width:min(720px,96vw);
      background:linear-gradient(180deg,#172d4a,#14244a);
      border:1px solid var(--border);
      border-radius:24px;
      padding:32px 24px 28px;
      box-shadow: 0 10px 40px rgba(0,42,150,0.30);
      margin:0 auto;
      position:relative;
    }
    h1 { margin:0; font-size:26px; color:var(--accent); font-weight:800; }
    p.lead { margin:0 0 18px; color:var(--sub); font-size:1.1em }
    .chips { display:flex; gap:8px; flex-wrap:wrap; margin-bottom:18px; font-size:14px; }
    .chip { padding:6px 12px; border-radius:999px; border:1px dashed #375985; background:#172d4a; color:#93c5fd;}
    form { display:grid; gap:16px; }
    label { display:block; margin:6px 0 6px; font-weight:600; color:var(--accent2) }
    input[type="text"] {
      width:100%; padding:12px 14px; border-radius:14px;
      border:1px solid var(--border); background:#121e37;
      color:var(--text); outline:none; font-size:1em;
      box-shadow:0 0 0 0px #3b82f640;
      transition:box-shadow 0.2s,border 0.2s;
      box-sizing: border-box;
    }
    input[type="text"]:focus {
      border-color: var(--accent); box-shadow:0 0 0 4px #3b82f680;
    }
    .wish, .nogift {
      display:flex; gap:10px; align-items:center; margin-bottom:7px;
    }
    .wish input, .nogift input { flex:1 0 0 }
    button.btn-danger, button.btn-ghost, button.btn-primary {
      padding:8px 14px;border-radius:12px;border:1px solid transparent;cursor:pointer;font-weight:700;
      user-select:none;transition:background 0.2s,box-shadow 0.2s;
    }
    button.btn-danger { background:var(--danger);color:#fff;border-color: #391313;}
    button.btn-danger:hover { background:#be123c; }
    button.btn-ghost { background:#162d54;color:#60a5fa;border-color: var(--border) }
    button.btn-ghost:hover { background:#1058be;color:#fff }
    button.btn-primary {
      background: linear-gradient(90deg,var(--accent),var(--accent2));
      color: #fff; border-color:var(--accent2);
      width:100%;max-width:280px;justify-content:center;box-shadow:0 0 15px #60a5fa70;
    }
    button.btn-primary:hover { background: var(--accent2); color:#182c54; }
    .actions { display:flex; gap:12px; flex-wrap:wrap; margin-top:7px; justify-content:flex-start }
    .msg {margin-top:8px;font-size:14px;min-height:20px;}
    .ok {color:#5eead4;}
    .err {color:var(--danger);}
    .sent-message {
      min-height:220px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.5em;
      color: var(--accent2);
      font-weight:700;
    }
    .footer {margin-top:16px;color:var(--sub);font-size:12px;text-align:center;}
    @media (max-width:600px) {
      .card { padding:12px 4vw 12px; }
      h1 { font-size:20px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>–¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞ 2026</h1>
      <p class="lead">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤ –≤–æ–ª—à–µ–±–Ω–æ–π –∏–≥—Ä–µ –æ–±–º–µ–Ω–∞ –ø–æ–¥–∞—Ä–∫–∞–º–∏! –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å –≤–∞—à–µ–º—É –°–∞–Ω—Ç–µ –≤—ã–±—Ä–∞—Ç—å –ª—É—á—à–∏–π –ø–æ–¥–∞—Ä–æ–∫.<br><b>–ë—é–¥–∂–µ—Ç –ø–æ–¥–∞—Ä–∫–∞ ‚Äî –¥–æ 1 500 ‚ÇΩ.</b></p>
      <div class="chips">
        <div class="chip">üéÅ –ü–æ–∂–µ–ª–∞–Ω–∏–π –∏ ¬´–Ω–µ –¥–∞—Ä–∏—Ç—å¬ª –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ</div>
        <div class="chip">üîí –î–∞–Ω–Ω—ã–µ –∏–¥—É—Ç —Ç–æ–ª—å–∫–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É</div>
        <div class="chip">üïí –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç 1‚Äì2 –º–∏–Ω—É—Ç—ã</div>
      </div>
      <div id="formBlock">
        <form id="santaForm" action="https://script.google.com/macros/s/AKfycbwkdG7OzyzvkDGnTDoz1f0etqOT2rj5i0xWT6LzI9RKMGEC70JULV9_m5C6bNQm32gV5A/exec" method="post" target="hidden_iframe" autocomplete="on" novalidate>
          <input type="hidden" name="wishesStr" id="wishesStr" />
          <input type="hidden" name="nogiftsStr" id="nogiftsStr" />

          <label for="fullname">–§–ò–û —É—á–∞—Å—Ç–Ω–∏–∫–∞ *</label>
          <input id="fullname" name="fullname" type="text" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required />

          <label>–ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç –°–∞–Ω—Ç—ã? *</label>
          <div id="wishesSection">
            <div class="wish">
              <input type="text" name="wish[]" placeholder="–ü–æ–¥–∞—Ä–æ–∫, –∂–µ–ª–∞–Ω–∏–µ –∏–ª–∏ —Å—Å—ã–ª–∫–∞" required />
              <button class="btn btn-danger" type="button" onclick="removeField(this)">‚úï</button>
            </div>
          </div>
          <div class="actions">
            <button class="btn btn-ghost" type="button" onclick="addWish()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–∂–µ–ª–∞–Ω–∏–µ</button>
          </div>
          <label>–ß–µ–≥–æ –≤–∞–º –ª—É—á—à–µ –Ω–µ –¥–∞—Ä–∏—Ç—å?</label>
          <div id="nogiftSection">
            <div class="nogift">
              <input type="text" name="nogift[]" placeholder="–ß—Ç–æ –Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å—Å—ã–ª–∫–∞" />
              <button class="btn btn-danger" type="button" onclick="removeField(this)">‚úï</button>
            </div>
          </div>
          <div class="actions">
            <button class="btn btn-ghost" type="button" onclick="addNoGift()">+ –î–æ–±–∞–≤–∏—Ç—å, —á–µ–≥–æ –Ω–µ –¥–∞—Ä–∏—Ç—å</button>
          </div>
          <div class="actions">
            <button id="submitBtn" class="btn btn-primary" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          </div>
          <div id="msg" class="msg"></div>
        </form>
      </div>
      <div id="sentBlock" class="sent-message" style="display:none;">–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞! –°–ø–∞—Å–∏–±–æ!</div>
      <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
      <div class="footer">–†–∞–∑–º–µ—â–∞–π—Ç–µ —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –ª—é–±–æ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ –∏–ª–∏ —Ä–∞–∑–¥–µ–ª–µ —Å–∞–π—Ç–∞</div>
    </div>
  </div>
  <script>
    const wishesSection = document.getElementById('wishesSection');
    const nogiftSection = document.getElementById('nogiftSection');
    const msg = document.getElementById('msg');
    const submitBtn = document.getElementById('submitBtn');
    const formBlock = document.getElementById('formBlock');
    const sentBlock = document.getElementById('sentBlock');
    let submitting = false;

    function addWish() {
      const row = document.createElement('div');
      row.className = 'wish';
      row.innerHTML = `
        <input type="text" name="wish[]" placeholder="–ü–æ–¥–∞—Ä–æ–∫, –∂–µ–ª–∞–Ω–∏–µ –∏–ª–∏ —Å—Å—ã–ª–∫–∞" required />
        <button class="btn btn-danger" type="button" onclick="removeField(this)">‚úï</button>
      `;
      wishesSection.appendChild(row);
    }
    function addNoGift() {
      const row = document.createElement('div');
      row.className = 'nogift';
      row.innerHTML = `
        <input type="text" name="nogift[]" placeholder="–ß—Ç–æ –Ω–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å—Å—ã–ª–∫–∞" />
        <button class="btn btn-danger" type="button" onclick="removeField(this)">‚úï</button>
      `;
      nogiftSection.appendChild(row);
    }
    function removeField(btn) {
      btn.closest('.wish, .nogift').remove();
    }
    window.onload = () => {
      if (wishesSection.querySelectorAll('.wish').length === 0) addWish();
      if (nogiftSection.querySelectorAll('.nogift').length === 0) addNoGift();
    };

    document.getElementById('santaForm').addEventListener('submit', function(e) {
      e.preventDefault();

      // –°–æ–±–∏—Ä–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
      const wishesArr = Array.from(wishesSection.querySelectorAll('input[name="wish[]"]'))
        .map(i => i.value.trim()).filter(Boolean);
      const nogiftsArr = Array.from(nogiftSection.querySelectorAll('input[name="nogift[]"]'))
        .map(i => i.value.trim()).filter(Boolean);
      const wishesStr = wishesArr.join(', ');
      const nogiftsStr = nogiftsArr.join(', ');
      const fio = this.fullname.value.trim();
      document.getElementById('wishesStr').value = wishesStr;
      document.getElementById('nogiftsStr').value = nogiftsStr;

      // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
      console.log('=== –û–¢–ü–†–ê–í–ö–ê –§–û–†–ú–´ ===');
      console.log('–§–ò–û:', fio);
      console.log('wishes[]:', wishesArr);
      console.log('nogift[]:', nogiftsArr);
      console.log('wishesStr:', wishesStr);
      console.log('nogiftsStr:', nogiftsStr);

      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!fio) {
        msg.textContent = '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –§–ò–û';
        msg.className = 'msg err';
        return;
      }
      if (!wishesStr) {
        msg.textContent = '–î–æ–±–∞–≤—å—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –ø–æ–∂–µ–ª–∞–Ω–∏–µ';
        msg.className = 'msg err';
        return;
      }

      submitBtn.disabled = true;
      msg.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
      msg.className = 'msg';

      // –ï—â—ë —Ä–∞–∑ –ª–æ–≥ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
      console.log('Payload –≤ hidden:', {
        fullname: fio,
        wishesStr: wishesStr,
        nogiftsStr: nogiftsStr
      });

      this.submit();
    });

    document.getElementById('hidden_iframe').addEventListener('load', () => {
      if (submitBtn.disabled) {
        formBlock.style.display = 'none';
        sentBlock.style.display = 'flex';
        msg.textContent = "";
        submitBtn.disabled = false;
        // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω –ø—É—Å—Ç–æ–π wish –∏ nogift –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        wishesSection.innerHTML = '';
        nogiftSection.innerHTML = '';
        addWish();
        addNoGift();
      }
    });
  </script>
</body>
</html>
